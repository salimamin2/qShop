<?phpclass ControllerInformationNews extends Controller {    public function index() {	$this->load->language('information/news');	$this->load->model('catalog/news');	$this->document->breadcrumbs = array();	$this->document->breadcrumbs[] = array(	    'href' => HTTP_SERVER . 'common/home',	    'text' => $this->language->get('text_home'),	    'separator' => FALSE	);	if (isset($this->request->get['news_id'])) {	    $news_info = $this->model_catalog_news->getNewsStory($this->request->get['news_id']);	    if (@$news_info) {		$this->document->title = $news_info['title'];		$this->document->breadcrumbs[] = array(		    'href' => HTTP_SERVER . 'information/news',		    'text' => $this->language->get('heading_title'),		    'separator' => $this->language->get('text_separator')		);		$this->document->breadcrumbs[] = array(		    'href' => HTTP_SERVER . 'information/news&news_id=' . $this->request->get['news_id'],		    'text' => $news_info['title'],		    'separator' => $this->language->get('text_separator')		);		$this->data['news_info'] = $news_info;		$this->data['heading_title'] = $news_info['title'];		$this->data['description'] = html_entity_decode($news_info['description']);		/* $this->load->helper('image');		  if ($news_info['image']) {		  $image = $news_info['image'];		  } else {		  $image = 'no_image.jpg';		  }		  $this->data['image'] = $image;		  if ($news_info['image_size'] == 0) {		  $this->data['thumb'] = HelperImage::resize($image, 120, 90);		  } else {		  $this->data['thumb'] = $image;		  } */		$this->data['button_news'] = $this->language->get('button_news');		$this->data['news'] = HTTP_SERVER . 'information/news';		if (file_exists(DIR_TEMPLATE . $this->config->get('config_template') . '/template/information/news.tpl')) {		    $this->template = $this->config->get('config_template') . '/template/information/news.tpl';		} else {		    $this->template = 'default/template/information/news.tpl';		}		$this->response->setOutput($this->render(), $this->config->get('config_compression'));	    } else {		$this->document->title = $this->language->get('text_error');		$this->document->breadcrumbs[] = array(		    'href' => HTTP_SERVER . 'information/news&news_id=' . $this->request->get['news_id'],		    'text' => $this->language->get('text_error'),		    'separator' => $this->language->get('text_separator')		);		$this->data['heading_title'] = $this->language->get('text_error');		$this->data['text_error'] = $this->language->get('text_error');		$this->data['button_continue'] = $this->language->get('button_continue');		$this->data['continue'] = HTTP_SERVER . 'common/home';		if (file_exists(DIR_TEMPLATE . $this->config->get('config_template') . '/template/error/not_found.tpl')) {		    $this->template = $this->config->get('config_template') . '/template/error/not_found.tpl';		} else {		    $this->template = 'default/template/error/not_found.tpl';		}		$this->response->setOutput($this->render(), $this->config->get('config_compression'));	    }	} else {	    if (isset($this->request->get['page'])) {		$page = $this->request->get['page'];	    } else {		$page = 1;	    }	    $this->data['news_data'] = array();	    $data = array(		'start' => ($page - 1) * 10,		'limit' => 10	    );	    $news_total = $this->model_catalog_news->getTotalNews();	    $results = $this->model_catalog_news->getNewsLimited($data);	    foreach ($results as $result) {		$this->data['news_data'][] = array(		    'title' => $result['title'],		    'short_description' => html_entity_decode($result['description']), //(reset(explode('.', html_entity_decode($result['description']))) . '.' . next(explode('.', html_entity_decode($result['description'])))),		    'href' => HTTP_SERVER . 'information/news&news_id=' . $result['news_id'],		    'date_added' => date('j-M-Y', strtotime($result['date_added']))		);	    }	    if (@$this->data['news_data']) {		$this->document->title = $this->language->get('heading_title');		$this->document->breadcrumbs[] = array(		    'href' => HTTP_SERVER . 'information/news',		    'text' => $this->language->get('heading_title'),		    'separator' => $this->language->get('text_separator')		);		$pagination = new Pagination();		$pagination->total = $news_total;		$pagination->page = $page;		$pagination->limit = 10;		$pagination->text = $this->language->get('text_pagination');		$pagination->url = HTTP_SERVER . 'information/news' . '&page=%s';		$this->data['pagination'] = $pagination->render();		$this->data['heading_title'] = $this->language->get('heading_title');		$this->data['text_read_more'] = $this->language->get('text_read_more');		$this->data['text_date_added'] = $this->language->get('text_date_added');		$this->data['button_continue'] = $this->language->get('button_continue');		$this->data['continue'] = HTTP_SERVER . 'common/home';		if (file_exists(DIR_TEMPLATE . $this->config->get('config_template') . '/template/information/news.tpl')) {		    $this->template = $this->config->get('config_template') . '/template/information/news.tpl';		} else {		    $this->template = 'default/template/information/news.tpl';		}		$this->response->setOutput($this->render(), $this->config->get('config_compression'));	    } else {		$this->document->title = $this->language->get('text_error');		$this->document->breadcrumbs[] = array(		    'href' => HTTP_SERVER . 'information/news',		    'text' => $this->language->get('text_error'),		    'separator' => $this->language->get('text_separator')		);		$this->data['heading_title'] = $this->language->get('text_error');		$this->data['text_error'] = $this->language->get('text_error');		$this->data['button_continue'] = $this->language->get('button_continue');		$this->data['continue'] = HTTP_SERVER . 'common/home';		if (file_exists(DIR_TEMPLATE . $this->config->get('config_template') . '/template/error/not_found.tpl')) {		    $this->template = $this->config->get('config_template') . '/template/error/not_found.tpl';		} else {		    $this->template = 'default/template/error/not_found.tpl';		}		$this->response->setOutput($this->render(), $this->config->get('config_compression'));	    }	}    }}?>